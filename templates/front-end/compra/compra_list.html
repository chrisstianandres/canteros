{% extends 'front-end/list.html' %}
{% load static from staticfiles %}
{% block table %}
    <thead>
    <tr>
        <th>Fecha</th>
        <th>Proveedor</th>
        <th>Total</th>
        <th>NÂ° Factura</th>
        <th>Estado</th>
        <th class="text-center" scope="col" style="width: 10%"><em class="fa fa-cog"></em></th>
    </tr>
    </thead>
    <tbody>
    {% if object_list %}
        {% for dato in object_list %}
            <tr>
                <td>{{ dato.fecha_compra }}</td>
                <td>{{ dato.proveedor.nombres }}</td>
                <td>$ {{ dato.total }}</td>
                <td>{{ dato.id }}</td>
                <td><span>{{ dato.get_estado_display }}</span></td>
                <td><a type="button" class="btn btn-success btn-sm" data-toggle="tooltip"
                       title="Editar Datos"
                       href="#"><i class="fa fa-edit"></i></a>
                    <button type="button" class="btn btn-primary btn-sm estado"
                            data-toggle="tooltip"
                            title="Gestionar Estado" name="btnestado">
                        <i class="fa fa-cogs"></i></button>
            </tr>
        {% endfor %}
    {% endif %}
    </tbody>
{% endblock %}
{% block javascript %}
    <script>
        $(function () {
            $("#datatable").DataTable({
                responsive: true,
                autoWidth: false,
                language: {
                    "url": '{% static 'lib/datatables-1.10.20/spanish.txt' %}'
                },

                createdRow: function (row, data, dataIndex) {
                    console.log(data[4]);
                    if (data[4] === '<span>FINALIZADA<span>') {
                        $('td', row).eq(4).addClass('badge badge-pill badge-success');
                    } else if (data[4] === '<span>PENDIENTE</span>') {
                        $('td', row).eq(4).find('span').addClass('badge badge-pill badge-warning');
                        //console.log($('td', row).eq(4).find('span').addClass('badge badge-pill badge-success'));
                        //$('td', row).eq(4).addClass('badge badge-pill badge-danger');
                    }

                }

            });
        });
    </script>
{% endblock %}